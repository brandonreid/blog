import{S as U,i as V,s as W,e as v,k as B,W as F,c as E,d as _,m as y,a as S,b as $,H as b,g as P,o as j,p as G,q,n as J,t as k,h as d,E as M,w as O,x as z,y as C,j as I,B as L}from"../../../chunks/index-da827fff.js";import{f as K}from"../../../chunks/fetchPosts-0e567cc8.js";import{p as D,b as N}from"../../../chunks/config-55cc70d6.js";import{a as T,P as Q}from"../../../chunks/Pagination-1d37dedc.js";import"../../../chunks/preload-helper-e4860ae8.js";import"../../../chunks/formatDate-fc285d6f.js";function X(r){let s,a,u,i,n,l,p,m;return{c(){s=v("h1"),a=k("Oops!"),u=B(),i=v("p"),n=k("Sorry, no posts to show here."),l=B(),p=v("a"),m=k("Back to blog"),this.h()},l(e){s=E(e,"H1",{});var g=S(s);a=d(g,"Oops!"),g.forEach(_),u=y(e),i=E(e,"P",{});var o=S(i);n=d(o,"Sorry, no posts to show here."),o.forEach(_),l=y(e),p=E(e,"A",{href:!0});var c=S(p);m=d(c,"Back to blog"),c.forEach(_),this.h()},h(){$(p,"href","/blog")},m(e,g){P(e,s,g),b(s,a),P(e,u,g),P(e,i,g),b(i,n),P(e,l,g),P(e,p,g),b(p,m)},p:M,i:M,o:M,d(e){e&&_(s),e&&_(u),e&&_(i),e&&_(l),e&&_(p)}}}function Y(r){let s,a,u,i,n,l,p,m,e,g,o,c,h,w;return e=new T({props:{currentPage:r[0],totalPosts:r[1]}}),o=new Q({props:{posts:r[2]}}),h=new T({props:{currentPage:r[0],totalPosts:r[1]}}),{c(){s=v("h1"),a=k("Posts "),u=k(r[4]),i=k("\u2013"),n=k(r[3]),l=k(" of "),p=k(r[1]),m=B(),O(e.$$.fragment),g=B(),O(o.$$.fragment),c=B(),O(h.$$.fragment)},l(t){s=E(t,"H1",{});var f=S(s);a=d(f,"Posts "),u=d(f,r[4]),i=d(f,"\u2013"),n=d(f,r[3]),l=d(f," of "),p=d(f,r[1]),f.forEach(_),m=y(t),z(e.$$.fragment,t),g=y(t),z(o.$$.fragment,t),c=y(t),z(h.$$.fragment,t)},m(t,f){P(t,s,f),b(s,a),b(s,u),b(s,i),b(s,n),b(s,l),b(s,p),P(t,m,f),C(e,t,f),P(t,g,f),C(o,t,f),P(t,c,f),C(h,t,f),w=!0},p(t,f){(!w||f&16)&&I(u,t[4]),(!w||f&8)&&I(n,t[3]),(!w||f&2)&&I(p,t[1]);const H={};f&1&&(H.currentPage=t[0]),f&2&&(H.totalPosts=t[1]),e.$set(H);const R={};f&4&&(R.posts=t[2]),o.$set(R);const A={};f&1&&(A.currentPage=t[0]),f&2&&(A.totalPosts=t[1]),h.$set(A)},i(t){w||(q(e.$$.fragment,t),q(o.$$.fragment,t),q(h.$$.fragment,t),w=!0)},o(t){j(e.$$.fragment,t),j(o.$$.fragment,t),j(h.$$.fragment,t),w=!1},d(t){t&&_(s),t&&_(m),L(e,t),t&&_(g),L(o,t),t&&_(c),L(h,t)}}}function Z(r){let s,a,u,i,n,l,p;document.title=s="Blog - page "+r[0];const m=[Y,X],e=[];function g(o,c){return o[2].length?0:1}return n=g(r),l=e[n]=m[n](r),{c(){a=v("meta"),u=B(),i=v("div"),l.c(),this.h()},l(o){const c=F('[data-svelte="svelte-laszff"]',document.head);a=E(c,"META",{"data-key":!0,name:!0,content:!0}),c.forEach(_),u=y(o),i=E(o,"DIV",{class:!0});var h=S(i);l.l(h),h.forEach(_),this.h()},h(){$(a,"data-key","description"),$(a,"name","description"),$(a,"content",N),$(i,"class","main-height")},m(o,c){b(document.head,a),P(o,u,c),P(o,i,c),e[n].m(i,null),p=!0},p(o,[c]){(!p||c&1)&&s!==(s="Blog - page "+o[0])&&(document.title=s);let h=n;n=g(o),n===h?e[n].p(o,c):(J(),j(e[h],1,1,()=>{e[h]=null}),G(),l=e[n],l?l.p(o,c):(l=e[n]=m[n](o),l.c()),q(l,1),l.m(i,null))},i(o){p||(q(l),p=!0)},o(o){j(l),p=!1},d(o){_(a),o&&_(u),o&&_(i),e[n].d()}}}const lt=async({fetch:r,params:s})=>{try{const a=s.page?s.page:1;if(a<=1)return{status:301,redirect:"/blog"};let u=a*D-D;const i=await r("/api/posts/count.json"),{total:n}=await i.json(),{posts:l}=await K({offset:u,page:a});return{status:200,props:{posts:l,page:a,totalPosts:n}}}catch(a){return{status:404,error:a.message}}};function x(r,s,a){let u,i,{page:n}=s,{totalPosts:l}=s,{posts:p=[]}=s;return r.$$set=m=>{"page"in m&&a(0,n=m.page),"totalPosts"in m&&a(1,l=m.totalPosts),"posts"in m&&a(2,p=m.posts)},r.$$.update=()=>{r.$$.dirty&1&&a(4,u=n*D-(D-1)||1),r.$$.dirty&3&&a(3,i=Math.min(n*D,l))},[n,l,p,i,u]}class rt extends U{constructor(s){super(),V(this,s,x,Z,W,{page:0,totalPosts:1,posts:2})}}export{rt as default,lt as load};
